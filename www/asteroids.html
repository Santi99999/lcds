<!DOCTYPE html>
<html>
<head>
    <title>LCDS-Asteroids</title>
    <style>
        #gameCanvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        // Variables del juego
        var canvas = document.getElementById("gameCanvas");
        var ctx = canvas.getContext("2d");
        var ship = { x: 400, y: 300, size: 20, speed: 5 };
        var bullets = [];
        var enemies = [];

        // Función para dibujar el juego
        function drawGame() {
            // Limpiar el lienzo
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Dibujar la nave
            ctx.beginPath();
            ctx.arc(ship.x, ship.y, ship.size, 0, Math.PI * 2);
            ctx.fillStyle = "blue";
            ctx.fill();
            ctx.closePath();

            // Dibujar las balas
            bullets.forEach(function(bullet) {
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, 5, 0, Math.PI * 2);
                ctx.fillStyle = "red";
                ctx.fill();
                ctx.closePath();
            });

            // Dibujar los enemigos
            enemies.forEach(function(enemy) {
                ctx.beginPath();
                ctx.arc(enemy.x, enemy.y, enemy.size, 0, Math.PI * 2);
                ctx.fillStyle = "black";
                ctx.fill();
                ctx.closePath();
            });
        }

        // Función para mover la nave
        function moveShip(keyCode) {
            if (keyCode === 37) {
                ship.x -= ship.speed;
            } else if (keyCode === 39) {
                ship.x += ship.speed;
            } else if (keyCode === 38) {
                ship.y -= ship.speed;
            } else if (keyCode === 40) {
                ship.y += ship.speed;
            }
        }

        // Función para crear una bala
        function createBullet() {
            var bullet = { x: ship.x, y: ship.y };
            bullets.push(bullet);
        }

        // Función para crear un enemigo
        function createEnemy() {
            var enemy = {
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * (30 - 10) + 10
            };
            enemies.push(enemy);
        }

        // Función para mover las balas
        function moveBullets() {
            bullets.forEach(function(bullet, index) {
                bullet.y -= 5;
                if (bullet.y < 0) {
                    bullets.splice(index, 1);
                }
            });
        }

        // Función para mover los enemigos
        function moveEnemies() {
            enemies.forEach(function(enemy, index) {
                enemy.y += 2;
                if (enemy.y > canvas.height) {
                    enemies.splice(index, 1);
                }
            });
        }

        // Función para detectar colisiones
        function detectCollisions() {
            bullets.forEach(function(bullet, bulletIndex) {
                enemies.forEach(function(enemy, enemyIndex) {
                    var dx = bullet.x - enemy.x;
                    var dy = bullet.y - enemy.y;
                    var distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < bullet.size + enemy.size) {
                        bullets.splice(bulletIndex, 1);
                        enemies.splice(enemyIndex, 1);
                    }
                });
            });
        }

        // Evento de teclado para mover la nave y disparar
        document.addEventListener("keydown", function(event) {
            if (event.keyCode === 37 || event.keyCode === 39 || event.keyCode === 38 || event.keyCode === 40) {
                moveShip(event.keyCode);
            } else if (event.keyCode === 32) {
                createBullet();
            }
        });

        // Bucle principal del juego
        function gameLoop() {
            drawGame();
            moveBullets();
            moveEnemies();
            detectCollisions();
            createEnemy();

            requestAnimationFrame(gameLoop);
        }

        // Iniciar el juego
        gameLoop();
    </script>
</body>
</html>
